ASFLAGS=-m32
#-fno-delete-null-pointer-checks because 0 is a valid address.
CFLAGS+= -I../src/ -I$(SRCROOT)/include -fno-delete-null-pointer-checks
LDFLAGS+= -Tmultiboot.ld
LDADD_START+= crt0.o

PROGRAM=apxh
SRCS+= ../src/main.c ../src/elf.c ../src/payload.c ../src/pae.c
SRCS+= ec.c mb.c rsdp.c

CC=i686-elf-gcc

EC_MACHINE=i386

@COMPILE_LIBEC@
@LINK_LIBEC@

ALL_TARGET+= crt0.o
CLEAN_FILES+= crt0.o
