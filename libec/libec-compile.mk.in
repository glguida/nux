#
# EC - An embedded non standard C library
# Copyright (C) 2019 Gianluca Guida <glguida@tlbflush.org>
#
#  SPDX-License-Identifier:	BSD-2-Clause
#
#

ifeq (z$(EC_MACHINE),z)
EC_MACHINE=@MACHINE@
endif

ifeq ($(EC_MACHINE),amd64)
CFLAGS+= -mcmodel=large -mno-red-zone
endif

CFLAGS+= -Wall -nostdinc -fno-builtin -ffreestanding -fno-strict-aliasing -mno-mmx -mno-sse -mno-sse2 -mno-sse3 -mno-avx -mno-avx2
LDFLAGS+= -nostdlib
CPPFLAGS+= -D_EC_SOURCE -I@ECDIR@
ASFLAGS+= -D_ASSEMBLER
